<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <title>Phone Home App</title>
    <!--Without the below script block, jQuey will not 
        get executed in electron window -->
    <script>
        if (typeof module === 'object') {
            window.module = module;
            module = undefined;
        }
    </script>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"
        integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>
    <!--Without the below script block, jQuery will not 
        get executed in electron window -->
    <script>
        if (window.module) {
            module = window.module;
        }
    </script>
</head>

<body>
    <h1>Phone Home App</h1>
    <script>
        //$(document).ready(function () {
        document.addEventListener('DOMContentLoaded', function () {
            // Inter Process Communication module for the renderer process
            const ipcRenderer = require('electron').ipcRenderer;

            // Recieves data from the main process
            ipcRenderer.on('received-data', function (evt, message) {
                $("#received-data-content").append(message + "<br \>");
            });

            // Sends data back to the main process
            // when the phoneHome button is clicked
            $("#phoneHome").click(function (event) {
                let messageValue = $("#messageText").val();
                if (messageValue){
                    ipcRenderer.send('phoneHome', messageValue);
                    $("#messageText").val("");
                }
            });
        });
    </script>
    <br />
    <input type="text" id="messageText" name="messageText" value="" />
    <input type="button" id="phoneHome" value="Phone Home" />
    <br />
    <h2>Incoming Calls</h2>
    <div id="received-data-content"></div>
</body>

</html>